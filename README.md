# jobfinder


Скрипт для поиска вакансий на hh.ru среди компаний из списка работодателей программы "Глобальное Образование" (http://educationglobal.ru/ns/participant/employment/)

Скрипт генерирует html-файл с вакансиями, который можно открыть в браузере. Поиск настраивается с помощью четырех текстовых файлов.
![table](https://github.com/akrapukhin/jf_images/blob/master/2020-02-04_22-16-46.png)

## 1. Скачивание
Нажмите на зеленую кнопку "Clone or download" наверху, затем в появившемся окне нажмите "Download ZIP". Разархивируйте скачанный ZIP-файл в любую папку. Название папки должно быть без пробелов, иначе могут быть проблемы при работе с командной строкой далее.


## 2. Установка Python
Для запуска скрипта нужен установленный Python 3. Самый простой способ установить его - через Microsoft Store или через Mac App Store. Здесь и далее инструкция описывает процесс работы на Windows, но на Маке все примерно также. 

Нажмите "Пуск" и введите на клавиатуре "store". Поиск покажет приложение Microsoft Store - запустите его.
![Image of store](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_21-57-52.png)

Введите в окно поиска "python". Вы должны увидеть в результатах python 3.7 и 3.8. Лучше ставьте 3.7, не уверен насчет 3.8. 
![python search](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_22-02-14.png)

Заходите на страницу программы и нажимаете "Получить". Все должно установиться автоматически.
![python install](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_22-14-45.png)


## 3. Установка библиотеки Requests для Python
Чтобы скрипт мог посылать запросы на headhunter.ru, необходимо установить библиотеку Requests для Python. Для этого нужно выполнить одну команду в командной строке. Ниже объясняется, как открыть командную строку и как выполнить эту команду.

#### 3.1. Запуск командной строки
Нажмите "Пуск" и введите на клавиатуре "cmd". Вы увидите Command Prompt или Командную строку. Запустите ее.
![terminal](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_22-18-40.png)

На Маке командная строка называется "Terminal". Все команды, описанные ниже, выполняются на Маке также.

#### 3.2. Установка Requests
Введите команду "pip3 install requests" в командной строке и нажмите Enter:
```
pip3 install requests
```
![terminal](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_22-25-00.png)

Если не сработало, можете попробовать убрать "3" и ввести "pip install requests"


## 4. Запуск скрипта
Теперь все готово для запуска скрипта. Запуск также осуществляется из командной строки. Перед запуском необходимо, чтобы командная строка указывала на папку, в которой находится скрипт. Для этого вы можете сначала зайти в папку со скриптом и скопировать адрес этой папки:
![copy](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_22-38-17.png)

И затем вставить (ctrl+v) этот адрес в командную строку, перед этим написав cd:
```
cd your/path/to/scriptfolder
```
![terminal](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_22-48-19.png)

Нажмите Enter. Командная строка в результате указывает на папку со скриптом. Теперь можно запустить скрипт. На windows ведите команду "python3 jobfinder.py", на Маке "python3 ./jobfinder.py":
```
python3 jobfinder.py
```
![terminal](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_23-25-07.png)

Если все работает правильно, появится информация о количестве найденных вакансий и тд. Если вы захотите запустить скрипт еще раз (например, после редактирования параметров поиска), вы можете нажать стрелку вверх на клавиатуре - прошлая команда снова появится в строке, вместо того, чтобы набирать команду снова.
![terminal](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_23-30-22.png)

Результаты будут записаны в HTML-файл results.html, который должен сразу автоматически открыться в вашем браузере и будет выглядеть примерно так:
![results](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_23-35-25.png)

Если файл не открылся, то зайдите в папку со скриптом, выберите файл results.html и откройте с помощью любого браузера:
![open_with](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_23-40-07.png)

Скрипт вернул вакансии, соответствующие моим настройкам. В следующем пункте рассказывается, как вы можете настроить поиск под ваши требования.


## 5. Настройка поисковых параметров
Для настройки используется 4 файла. Ниже представлены инструкции по каждому файлу.

#### 5.1. query.txt
Здесь вам нужно ввести ваш поисковый запрос. Сюда вы пишете то, что обычно вводите на сайте hh.ru, когда ищете там вакансии. Я советую прочитать короткую инструкцию от hh о том, как пользоваться их языком запросов, это может существенно облегчить поиск:
https://hh.ru/article/1175

Например, с помощью этого языка вы можете объединить несколько запросов в один, используя OR - тогда запускать скрипт нужно будет только один раз, вместо того, чтобы запускать его многократно для каждого запроса:
![query](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_23-57-29.png)

Если вы затем будете редактировать этот файл, не допускайте того, чтобы слово OR оказалось последним. Например, если вы решили удалить последнюю строку и забыли убрать OR с предыдущей строки, то headhunter вернет некорректные результаты и никак об этом не предупредит.
![queryor](https://github.com/akrapukhin/jf_images/blob/master/2020-02-03_23-58-19.png)

Запрос необязательно писать на нескольких строках, как на скриншоте - вы можете писать его и в одну строку.


#### 5.2. include_areas.txt
Здесь вы можете указать города или области, в которых хотите найти вакансии. Если не указано ничего, то вакансии ищутся по всей России. Вы можете указать несколько городов, каждый город должен быть на новой строке. Вы также можете указывать области, например "Московская область", "Ленинградская область" и тд. Предположим, вы не можете работать в Москве, но хотите быть поближе. В таком случае можете искать, например, так:
![incl](https://github.com/akrapukhin/jf_images/blob/master/2020-02-04_22-00-12.png)

Тут необходимо отметить, что Москва не входит в Московскую область. Также Санкт-Петербург не входит в Ленинградскую. При этом Нижний Новгород, Новосибирск и другие города входят в соответствующие области. Поэтому вы можете написать, например, "Ярославская область" и Ярославль будет включен в запрос. Также стоит учитывать, что hh считает Зеленоград Московской областью, поэтому при запросе вакансий в Московской области будут включены вакансии в Зеленограде. ГО же считает Зеленоград Москвой (административно это действительно Москва). Вы можете исключить Зеленоград, это объясняется в следующем пункте.


#### 5.3. exclude_areas.txt
Здесь вы можете указать, какие города исключить из поиска. В основном это используется для того, чтобы исключить Москву и Санкт-Петербург, но вы можете исключать любые города (области исключать нельзя). Таким образом, если вы ищете работу по всей России, кроме Москвы и Питера, вы можете оставить include_areas.txt пустым, а в exclude_areas.txt внести Москву и Санкт-Петербург. Скрипт вернет все вакансии в любых городах России, кроме Москвы и Питера.
![excl1](https://github.com/akrapukhin/jf_images/blob/master/2020-02-04_22-11-49.png)

Исключение Зеленограда из поиска по Московской области:
![excl2](https://github.com/akrapukhin/jf_images/blob/master/2020-02-04_22-18-55.png)

#### 5.4. date_from.txt
Здесь можно указать дату публикации вакансий. Если указано, например, 01-02-2020, то будут показаны только вакансии, опубликованные начиная с 1 февраля 2020 года, а более старые вакансии будут игнорироваться. Формат даты должен быть ДД/ММ/ГГГГ. Этот файл по умолчанию пустой, и скрипт возвращает все вакансии, которые имеют активный статус на hh.ru. Этот параметр не особо нужен, так как скрипт показывает вакансии в порядке, отсортированном по дате, и у каждой вакансии указана дата и время публикации. Поэтому вы можете просто не скроллить дальше, дойдя до какой-то даты, так как все следующие вакансии будут еще более устаревшими.


#### 5.5. companies.txt
В этом файле находится список компаний, одобренных ГО. Редактировать его не имеет смысла, так как скрипт загружает этот файл по интернету с гитхаба, а не из копии на вашем компьютере. Если вы нашли компанию из списка ГО, которая есть на hh.ru, но нет в этом списке, напишите мне (https://www.facebook.com/alekrap) и я добавлю ее в файл.
